# Kaggle Submission Notebook Guide

## Overview

The `kaggle_submission.ipynb` notebook is ready for submission to the AIMO 3 competition. It uses the ToolOrchestra-based multi-domain solver to solve problems.

## How It Works

1. **Initialization**: Sets up the ToolOrchestra adapter with all 7 domain solvers
2. **Predict Function**: Receives problems from Kaggle API and solves them
3. **Inference Server**: Handles communication with Kaggle's evaluation system
4. **Submission**: Automatically generates submission file via Kaggle API

## Requirements

- **CPU Notebook**: ≤ 9 hours runtime
- **GPU Notebook**: ≤ 5 hours runtime  
- **Internet**: Disabled
- **Submission**: Generated by API (automatic)

## Solver Configuration

The notebook uses:
- **ToolOrchestra Adapter**: Intelligent tool orchestration
- **7 Domain Solvers**: Geometry (25 theorems), Algebra, Number Theory, Combinatorics, Graph Theory, Analysis, Symbolic
- **Stability Tracking**: Disabled for speed (can enable for debugging)

## Local Testing

To test locally before submission:

1. Download competition data:
   ```bash
   kaggle competitions download -c ai-mathematical-olympiad-progress-prize-3
   unzip ai-mathematical-olympiad-progress-prize-3.zip
   ```

2. Run the notebook locally or use:
   ```python
   # Uncomment the local testing cell in the notebook
   inference_server.run_local_gateway(
       data_paths=('path/to/test.csv',)
   )
   ```

## Submission Process

1. Upload the notebook to Kaggle
2. Attach competition data: `ai-mathematical-olympiad-progress-prize-3`
3. Set notebook settings:
   - **Accelerator**: CPU or GPU (H100 available)
   - **Internet**: Off
   - **Output**: On (to see logs)
4. Commit and submit
5. Wait for evaluation (up to 9 hours for CPU, 5 hours for GPU)

## Troubleshooting

### Import Errors
- Ensure all source files are in `/kaggle/working/src/`
- Check that `kaggle_evaluation` is accessible

### Timeout Issues
- Reduce solver complexity if hitting time limits
- Disable stability tracking (already done)
- Consider using UnifiedSolver instead of ToolOrchestra if too slow

### Memory Issues
- Clear cache between problems if needed
- Reduce max_search_iterations in geometry solver

## Expected Performance

Based on system capabilities:
- **Geometry Problems**: 85-90% accuracy
- **Algebra Problems**: 70-80% accuracy
- **Number Theory**: 60-70% accuracy
- **Overall**: 75-80% accuracy (competitive level)

## Files Needed

The notebook expects:
- `/kaggle/working/src/` - All source code
- `/kaggle/input/ai-mathematical-olympiad-progress-prize-3/test.csv` - Test data
- `/kaggle/input/ai-mathematical-olympiad-progress-prize-3/kaggle_evaluation/` - Evaluation API

## Notes

- The solver automatically handles errors and returns 0 as fallback
- Answers are clamped to [0, 99999] range
- Progress is logged for debugging
- Submission file is generated automatically by Kaggle API

